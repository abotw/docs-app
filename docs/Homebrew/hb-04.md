# Homebrew-04: Leaves

## 1. What is `brew leaves`?

In Homebrew terms:

-   **Leaves** = formulae you **explicitly installed yourself**
-   **Non-leaves** = dependencies that were installed **only because something else needed them**

ðŸ‘‰ **`brew leaves` shows the â€œtop-levelâ€ packages you actually care about.**

### Example

If you install:

```bash
brew install git
```

Homebrew may also install:

-   `gettext`
-   `pcre2`
-   `ca-certificates`

But:

```bash
brew leaves
```

will show:

```text
git
```

------

## 2. Basic Usage

### Show all leaves

```bash
brew leaves
```

Output:

```text
git
python
wget
node
```

This means:

-   You directly installed **git, python, wget, node**
-   Everything else is just dependencies

------

## 3. Why `brew leaves` Is Useful

### â‘  Understand your environment

See **what you intentionally installed**, not the clutter.

### â‘¡ Clean up Homebrew safely

You can remove unused dependencies **without breaking your main tools**.

### â‘¢ Rebuild a system

`brew leaves` is perfect when:

-   Migrating to a new Mac
-   Creating a Brewfile
-   Auditing installed software

------

## 4. `brew leaves` vs Related Commands

### `brew list`

```bash
brew list
```

-   Shows **everything** installed
-   Includes dependencies
-   Often very long

### `brew leaves`

```bash
brew leaves
```

-   Shows only **top-level formulae**
-   Much shorter
-   Human-friendly

ðŸ“Œ Think of it as:

>   ```
>   brew leaves = what *I* asked for
>   ```

------

## 5. Show Leaves with Descriptions

```bash
brew leaves | xargs brew desc
```

Example output:

```text
git: Distributed revision control system
python: Interpreted, interactive, object-oriented programming language
wget: Internet file retriever
```

Useful when you:

-   Forgot why you installed something
-   Are reviewing an old machine

------

## 6. Find Unused Dependencies

### Step 1: Check for unused deps

```bash
brew autoremove --dry-run
```

-   Shows what **can be removed**
-   Does NOT delete anything yet

### Step 2: Actually remove them

```bash
brew autoremove
```

Safe because:

-   Homebrew will not remove leaves
-   Only removes unused dependencies

------

## 7. Remove a Leaf Package

```bash
brew uninstall wget
```

After removing a leaf, you can clean up:

```bash
brew autoremove
```

------

## 8. Mark / Unmark Leaves Manually

Sometimes you want to **keep a dependency permanently**.

### Mark as a leaf

```bash
brew install foo
```

or if already installed:

```bash
brew link foo
```

### Unmark as a leaf

```bash
brew unlink foo
```

âš ï¸ Advanced usage, but useful for power users.

------

## 9. Use `brew leaves` to Create a Brewfile

A very common workflow:

```bash
brew leaves > leaves.txt
```

Or directly:

```bash
brew bundle dump --describe
```

Internally, Homebrew uses the same idea:

-   Leaves = what goes into your Brewfile

------

## 10. Typical Beginner Workflow

```bash
# See what you installed on purpose
brew leaves

# Preview cleanup
brew autoremove --dry-run

# Clean safely
brew autoremove

# List everything (if needed)
brew list
```

------

## 11. Mental Model (Important)

Think of Homebrew as a tree:

```
git
 â”œâ”€ gettext
 â”œâ”€ pcre2
 â””â”€ ca-certificates
```

-   **Leaves** = roots you planted
-   **Dependencies** = branches that grew automatically

`brew leaves` shows **the roots** ðŸŒ±

------

## 12. Summary

| Command            | What it does                           |
| ------------------ | -------------------------------------- |
| `brew leaves`      | Show packages you explicitly installed |
| `brew list`        | Show everything                        |
| `brew autoremove`  | Remove unused dependencies             |
| `brew desc`        | Show package descriptions              |
| `brew bundle dump` | Create Brewfile                        |