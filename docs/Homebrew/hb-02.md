# Homebrew-02: Services

Advanced Homebrew: Managing Services (MySQL, Redis, PostgreSQL, ‚Ä¶)

## 1. What Are ‚ÄúServices‚Äù in Homebrew?

In Homebrew, a **service** is a program that:

-   runs **in the background**
-   starts automatically (optionally at login / boot)
-   exposes a port or socket
-   behaves like a system daemon

Typical examples:

-   MySQL / PostgreSQL ‚Üí databases
-   Redis ‚Üí cache
-   Nginx ‚Üí web server
-   RabbitMQ ‚Üí message broker

Homebrew manages services using **`launchd`** on macOS.

------

## 2. The `brew services` Command

Homebrew extends basic package management with:

```bash
brew services
```

This integrates Homebrew packages with macOS‚Äôs **launchd** system.

### 2.1 Check Available Commands

```bash
brew services --help
```

Core subcommands:

-   `start`
-   `stop`
-   `restart`
-   `list`
-   `run`

------

## 3. Installing a Service (Example: MySQL)

### 3.1 Install MySQL

```bash
brew install mysql
```

Homebrew installs:

-   binaries
-   default config files
-   a launchd service definition

------

### 3.2 Start MySQL as a Service

```bash
brew services start mysql
```

This means:

-   MySQL runs in the background
-   It auto-starts on login
-   Managed by `launchd`

You should see output like:

```text
Successfully started `mysql` (label: homebrew.mxcl.mysql)
```

------

### 3.3 Check Service Status

```bash
brew services list
```

Example output:

```text
Name    Status  User     File
mysql   started yourname ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist
redis   stopped
```

------

## 4. Service Lifecycle: Start vs Run

### 4.1 `brew services start`

```bash
brew services start mysql
```

-   Runs as a background daemon
-   Restarts on login
-   Best for daily development

------

### 4.2 `brew services run`

```bash
brew services run mysql
```

-   Runs in foreground
-   Stops when terminal closes
-   Useful for debugging

Founder tip:
üëâ Use `run` when tuning configs or debugging startup failures.

------

## 5. Stopping and Restarting Services

### 5.1 Stop a Service

```bash
brew services stop mysql
```

This:

-   stops the daemon
-   prevents auto-start

------

### 5.2 Restart a Service

```bash
brew services restart mysql
```

Use this after:

-   changing config files
-   upgrading versions

------

## 6. Managing Common Services

### 6.1 MySQL

Start:

```bash
brew services start mysql
```

Connect:

```bash
mysql -u root
```

Config location (Apple Silicon):

```text
/opt/homebrew/etc/my.cnf
```

Data directory:

```text
/opt/homebrew/var/mysql
```

------

### 6.2 Redis

Install:

```bash
brew install redis
```

Start:

```bash
brew services start redis
```

Check:

```bash
redis-cli ping
```

Expected:

```text
PONG
```

------

### 6.3 PostgreSQL

Install:

```bash
brew install postgresql@15
```

Start:

```bash
brew services start postgresql@15
```

Connect:

```bash
psql postgres
```

------

### 6.4 Nginx

Install:

```bash
brew install nginx
```

Start:

```bash
brew services start nginx
```

Default port:

```text
http://localhost:8080
```

Config:

```text
/opt/homebrew/etc/nginx/nginx.conf
```

------

## 7. Upgrading Services Safely

### 7.1 Upgrade a Service Package

```bash
brew upgrade mysql
```

Important:

-   Homebrew **does not auto-restart services**
-   Restart manually

```bash
brew services restart mysql
```

------

### 7.2 Check for Breaking Changes

Before major upgrades:

```bash
brew info mysql
```

Read:

-   caveats
-   migration notes

Founder rule:

>   Never blindly upgrade databases on a production-like environment.

------

## 8. Permissions, Users, and `sudo`

### 8.1 User-Level Services (Default)

Homebrew services run as:

```text
your macOS user
```

This is intentional:

-   safer
-   no `sudo`
-   fewer permission bugs

------

### 8.2 System-Wide Services (Advanced)

You *can* run system-level services:

```bash
sudo brew services start mysql
```

This installs to:

```text
/Library/LaunchDaemons
```

‚ö†Ô∏è **Not recommended** unless:

-   you know launchd well
-   you need system-wide access

------

## 9. Debugging Service Failures

### 9.1 Check Service List

```bash
brew services list
```

Look for:

-   `error`
-   `stopped`

------

### 9.2 Run in Foreground

```bash
brew services run mysql
```

Errors will appear directly in terminal.

------

### 9.3 Check Logs

Example (MySQL):

```bash
tail -f /opt/homebrew/var/mysql/$(hostname).err
```

Logs are your best friend.

------

## 10. Homebrew Services vs Docker

| Homebrew Services  | Docker            |
| ------------------ | ----------------- |
| Lightweight        | Heavier           |
| Native performance | Containerized     |
| Easy local dev     | Production parity |
| Fast startup       | Slower startup    |

Founder advice:

-   Use **Homebrew services** for **local development**
-   Use **Docker** for **production simulation**

------

## 11. Service Management Best Practices

### ‚úÖ Do

-   Keep services minimal
-   Start only what you need
-   Restart after upgrades
-   Track configs in Git

### ‚ùå Don‚Äôt

-   Run everything at login
-   Mix system and brew installs
-   Ignore logs

------

## 12. Real Founder Workflow Example

Daily routine:

```bash
brew update
brew upgrade
brew services list
```

Project startup:

```bash
brew services start mysql
brew services start redis
```

Project shutdown:

```bash
brew services stop mysql
brew services stop redis
```

Simple, predictable, scalable.

------

## 13. Final Thoughts

Homebrew services turn macOS into a **clean, developer-grade workstation**.

Once you master:

-   `brew install`
-   `brew services`
-   config locations
-   upgrade workflows

You‚Äôll have:

-   fewer bugs
-   faster setups
-   happier teams